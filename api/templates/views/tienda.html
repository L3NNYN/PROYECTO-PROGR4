{% extends "layout.html"%}

{% block title%}Tienda{%endblock%}

{%block head%}
<script src="{{ url_for('static', filename = '/js/tienda.js') }}"></script>
<script src="https://unpkg.com/bootstrap-vue@2.12.0/dist/bootstrap-vue.js"></script>
{% endblock %}

{%block body%}

{% include "navbar.html" %}
<div class="container">
    <div class="row">
        {%if item%}
        <div class="col-4 d-flex flex-column align-items-center p-2">
            <div>
                <img src="/static/pics/{{item[0].foto}}" class="rounded" style="width: 12rem; height: 12rem;" alt="Circle image"></img>
                <input type="hidden" id="id" value="{{item[0].id}}" />
                <h3>{{item[0].nombre}}</h3>
                <h4>{{item[0].email}}</h4>
                <h4> {{item[0].direccion}} </h4>
                <img src="{{ url_for('static', filename = 'resources/estrella.png') }}" style="width: 32px; height: 32px;" alt="">
                <p>(12)</p>
                {%if session.usuario != '' and session.tipo_usuario == 'C' %}
                <b-button v-if="seguir == 'T'" @click="actualizarSeguimiento('F')" variant="outline-dark badge-pill m-2"><i class="far fa-heart"></i> Dejar de seguir</b-button>
                <b-button v-else @click="actualizarSeguimiento('T')" variant="primary badge-pill m-2"><i class="fas fa-heart"></i> Seguir</b-button>
                {%endif%}
                <br>
                <label for="rating-sm-no-border">Calificacion:</label>
                <b-form-rating id="rating-sm-no-border" variant="warning" no-border v-model="tienda.value" size="lg"></b-form-rating>
            </div>
        </div>
        {%endif%}
        <div class="col-8">
            <div id="masVendidos" class="m-5 p-2">
                <h3>MÃ¡s vendidos</h3>
                <div v-if="masVendidos != ''" class="d-flex flex-row">
                </div>
                <h6 v-else class="m-1">No hay productos vendidos aun</h6>
            </div>
            <div id="todos" class="m-5 p-2">
                <h3>Todos</h3>
                <div class="d-flex flex-row my-3">
                    <b-form-input class="badge-pill" v-model="tienda.search" placeholder="Buscar"></b-form-input>
                    <b-button @click="search" variant="primary badge-pill ml-2"><i class="fas fa-search"></i></b-button>
                </div>
                <div v-if="productos != ''"  class="d-flex flex-row">
                    <b-card v-for="producto in productos" img-top tag="article" style="min-width:12rem; min-height: 10rem;" class="m-2">
                        <b-card-header>
                            <h4>[[producto.descripcion]]</h5>
                        </b-card-header>
                        <b-card-text class="p-2">
                            <h6>Precio: [[producto.precio]]</h6>
                            <h6>Categoria: [[producto.categoria]]</h6>
                            <h6>Inventario: [[producto.stock]]</h6>
                            <small>[[producto.publicacion]]</small>
                        </b-card-text>
                        <b-card-footer class="d-flex flex-column align-items-center">
                            <div v-if="tienda.id == producto.tienda_id" class="div">
                                <b-button :href="'/producto/'+ producto.id" variant="outline-info mx-2">Ver</b-button>
                                <b-button @click="agregarCarrito(producto.id, producto.tienda_id)" variant="primary">Agregar al carrito</b-button>        
                            </div>
                            <a v-else class="btn btn-primary" href="/edit_producto/{{item.id}}"><i class="fas fa-pen"></i> Editar</a>
                        </b-card-footer>
                    </b-card>
                </div>
                <h6 v-else class="m-1">No hay productos</h6>
            </div>
            {%if profile != '' and profile == 'T' %}
                <div id="reportes" class="m-5 p-2">
                    <h3>Reportes</h3>
                    <div class="d-flex flex-column">
                        <div class="d-flex flex-row">
                            <h5></h5>
                        </div>
                    </div>
                </div>
            {%endif%}
        </div>
    </div>
</div>
        
{% endblock %}